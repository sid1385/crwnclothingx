{"ast":null,"code":"import { takeEvery, call, put, take, takeLatest, delay, all } from \"redux-saga/effects\";\nimport { auth, provider, createUserProfileDocument, checkUser } from \"../../FireBase/firebase.config\";\nimport { googleSignInCompleted, googleSignInError, emailSignInCompleted, emailSignInError, signOutCompleted, signOutError } from \"./user-actions\";\n\nfunction* GoogleSignInStart() {\n  yield takeLatest(\"GOOGLE_SIGNIN_START\", googleSignInFirebaseAsync);\n}\n\n_c = GoogleSignInStart;\n\nfunction* checkUserSession() {\n  yield takeLatest(\"CHECK_USER_SESSION\", checkUserSessionFirebase);\n}\n\nfunction* userSignOutInitialize() {\n  yield takeLatest(\"SIGN_OUT_START\", signOut);\n}\n\nfunction* signOut() {\n  try {\n    yield auth.signOut();\n    yield put(signOutCompleted());\n  } catch (error) {\n    put(signOutError(error));\n  }\n}\n\nfunction* checkUserSessionFirebase() {\n  try {\n    const user = yield checkUser();\n    if (user) return;\n    const userref = yield call(createUserProfileDocument, user);\n    const snapshot = yield userref.get();\n    yield put(emailSignInCompleted({\n      id: snapshot.id,\n      ...snapshot.data()\n    }));\n  } catch (error) {\n    yield put(emailSignInError(error));\n  }\n}\n\nfunction* emailSignInFirebaseAsync({\n  payload: {\n    email,\n    password\n  }\n}) {\n  console.log(email, password);\n\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    const userref = yield call(createUserProfileDocument, user);\n    const snapshot = yield userref.get();\n    yield put(emailSignInCompleted({\n      id: snapshot.id,\n      ...snapshot.data()\n    }));\n  } catch (error) {\n    yield put(emailSignInError(error));\n  }\n}\n\nexport function* EmailSignInstart() {\n  yield takeLatest(\"EMAIL_SIGNIN_START\", emailSignInFirebaseAsync);\n}\n_c2 = EmailSignInstart;\n\nfunction* googleSignInFirebaseAsync() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(provider);\n    const userref = yield call(createUserProfileDocument, user);\n    const snapshot = yield userref.get();\n    yield put(googleSignInCompleted({\n      id: snapshot.id,\n      ...snapshot.data()\n    }));\n  } catch (error) {\n    yield put(googleSignInError(error));\n  }\n}\n\nexport function* userRootSaga() {\n  yield all([call(GoogleSignInStart), call(EmailSignInstart), call(checkUserSession), call(userSignOutInitialize)]);\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"GoogleSignInStart\");\n$RefreshReg$(_c2, \"EmailSignInstart\");","map":{"version":3,"sources":["/home/siddhesh/React/crwn-clothing/crwn-clothing/src/redux/user/user-saga.js"],"names":["takeEvery","call","put","take","takeLatest","delay","all","auth","provider","createUserProfileDocument","checkUser","googleSignInCompleted","googleSignInError","emailSignInCompleted","emailSignInError","signOutCompleted","signOutError","GoogleSignInStart","googleSignInFirebaseAsync","checkUserSession","checkUserSessionFirebase","userSignOutInitialize","signOut","error","user","userref","snapshot","get","id","data","emailSignInFirebaseAsync","payload","email","password","console","log","signInWithEmailAndPassword","EmailSignInstart","signInWithPopup","userRootSaga"],"mappings":"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","sourcesContent":["import {\n  takeEvery,\n  call,\n  put,\n  take,\n  takeLatest,\n  delay,\n  all,\n} from \"redux-saga/effects\";\n\nimport {\n  auth,\n  provider,\n  createUserProfileDocument,\n  checkUser,\n} from \"../../FireBase/firebase.config\";\n\nimport {\n  googleSignInCompleted,\n  googleSignInError,\n  emailSignInCompleted,\n  emailSignInError,\n  signOutCompleted,\n  signOutError,\n} from \"./user-actions\";\n\nfunction* GoogleSignInStart() {\n  yield takeLatest(\"GOOGLE_SIGNIN_START\", googleSignInFirebaseAsync);\n}\n\nfunction* checkUserSession() {\n  yield takeLatest(\"CHECK_USER_SESSION\", checkUserSessionFirebase);\n}\n\nfunction* userSignOutInitialize() {\n  yield takeLatest(\"SIGN_OUT_START\", signOut);\n}\n\nfunction* signOut() {\n  try {\n    yield auth.signOut();\n    yield put(signOutCompleted());\n  } catch (error) {\n    put(signOutError(error));\n  }\n}\n\nfunction* checkUserSessionFirebase() {\n  try {\n    const user = yield checkUser();\n    if (user) return;\n    const userref = yield call(createUserProfileDocument, user);\n    const snapshot = yield userref.get();\n\n    yield put(\n      emailSignInCompleted({\n        id: snapshot.id,\n        ...snapshot.data(),\n      })\n    );\n  } catch (error) {\n    yield put(emailSignInError(error));\n  }\n}\nfunction* emailSignInFirebaseAsync({ payload: { email, password } }) {\n  console.log(email, password);\n  try {\n    const { user } = yield auth.signInWithEmailAndPassword(email, password);\n    const userref = yield call(createUserProfileDocument, user);\n    const snapshot = yield userref.get();\n\n    yield put(\n      emailSignInCompleted({\n        id: snapshot.id,\n        ...snapshot.data(),\n      })\n    );\n  } catch (error) {\n    yield put(emailSignInError(error));\n  }\n}\n\nexport function* EmailSignInstart() {\n  yield takeLatest(\"EMAIL_SIGNIN_START\", emailSignInFirebaseAsync);\n}\n\nfunction* googleSignInFirebaseAsync() {\n  try {\n    const { user } = yield auth.signInWithPopup(provider);\n\n    const userref = yield call(createUserProfileDocument, user);\n\n    const snapshot = yield userref.get();\n\n    yield put(\n      googleSignInCompleted({\n        id: snapshot.id,\n        ...snapshot.data(),\n      })\n    );\n  } catch (error) {\n    yield put(googleSignInError(error));\n  }\n}\n\nexport function* userRootSaga() {\n  yield all([\n    call(GoogleSignInStart),\n    call(EmailSignInstart),\n    call(checkUserSession),\n    call(userSignOutInitialize),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}