{"ast":null,"code":"import { takeEvery, call, put, take, takeLatest, delay, all } from \"redux-saga/effects\";\nimport { auth, provider, createUserProfileDocument } from \"../../FireBase/firebase.config\";\nimport { googleSignInCompleted, googleSignInError } from \"./user-actions\";\nexport function* GoogleSignInStart() {\n  yield takeLatest(\"GOOGLE_SIGNIN_START\", fetchUserFromFirebaseAsync);\n}\n_c = GoogleSignInStart;\n\nfunction* fetchUserFromFirebaseAsync() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(provider);\n    const userref = yield call(createUserProfileDocument, user); //console.log(userref);\n\n    const snapshot = yield userref.get();\n    console.log({\n      id: snapshot.id,\n      ...snapshot.data()\n    });\n    yield call(googleSignInCompleted({\n      id: snapshot.id,\n      ...snapshot.data()\n    }));\n    console.log(snapshot.id);\n  } catch (error) {\n    yield put(googleSignInError(error));\n  }\n}\n\nexport function* userRootSaga() {\n  yield all([call(GoogleSignInStart)]);\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleSignInStart\");","map":{"version":3,"sources":["/home/siddhesh/React/crwn-clothing/crwn-clothing/src/redux/user/user-saga.js"],"names":["takeEvery","call","put","take","takeLatest","delay","all","auth","provider","createUserProfileDocument","googleSignInCompleted","googleSignInError","GoogleSignInStart","fetchUserFromFirebaseAsync","user","signInWithPopup","userref","snapshot","get","console","log","id","data","error","userRootSaga"],"mappings":"AAAA,SACEA,SADF,EAEEC,IAFF,EAGEC,GAHF,EAIEC,IAJF,EAKEC,UALF,EAMEC,KANF,EAOEC,GAPF,QAQO,oBARP;AAUA,SACEC,IADF,EAEEC,QAFF,EAGEC,yBAHF,QAIO,gCAJP;AAMA,SAASC,qBAAT,EAAgCC,iBAAhC,QAAyD,gBAAzD;AAEA,OAAO,UAAUC,iBAAV,GAA8B;AACnC,QAAMR,UAAU,CAAC,qBAAD,EAAwBS,0BAAxB,CAAhB;AACD;KAFgBD,iB;;AAIjB,UAAUC,0BAAV,GAAuC;AACrC,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMP,IAAI,CAACQ,eAAL,CAAqBP,QAArB,CAAvB;AAEA,UAAMQ,OAAO,GAAG,MAAMf,IAAI,CAACQ,yBAAD,EAA4BK,IAA5B,CAA1B,CAHE,CAIF;;AACA,UAAMG,QAAQ,GAAG,MAAMD,OAAO,CAACE,GAAR,EAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY;AACVC,MAAAA,EAAE,EAAEJ,QAAQ,CAACI,EADH;AAEV,SAAGJ,QAAQ,CAACK,IAAT;AAFO,KAAZ;AAIA,UAAMrB,IAAI,CACRS,qBAAqB,CAAC;AACpBW,MAAAA,EAAE,EAAEJ,QAAQ,CAACI,EADO;AAEpB,SAAGJ,QAAQ,CAACK,IAAT;AAFiB,KAAD,CADb,CAAV;AAMAH,IAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,EAArB;AACD,GAjBD,CAiBE,OAAOE,KAAP,EAAc;AACd,UAAMrB,GAAG,CAACS,iBAAiB,CAACY,KAAD,CAAlB,CAAT;AACD;AACF;;AAED,OAAO,UAAUC,YAAV,GAAyB;AAC9B,QAAMlB,GAAG,CAAC,CAACL,IAAI,CAACW,iBAAD,CAAL,CAAD,CAAT;AACD","sourcesContent":["import {\n  takeEvery,\n  call,\n  put,\n  take,\n  takeLatest,\n  delay,\n  all,\n} from \"redux-saga/effects\";\n\nimport {\n  auth,\n  provider,\n  createUserProfileDocument,\n} from \"../../FireBase/firebase.config\";\n\nimport { googleSignInCompleted, googleSignInError } from \"./user-actions\";\n\nexport function* GoogleSignInStart() {\n  yield takeLatest(\"GOOGLE_SIGNIN_START\", fetchUserFromFirebaseAsync);\n}\n\nfunction* fetchUserFromFirebaseAsync() {\n  try {\n    const { user } = yield auth.signInWithPopup(provider);\n\n    const userref = yield call(createUserProfileDocument, user);\n    //console.log(userref);\n    const snapshot = yield userref.get();\n    console.log({\n      id: snapshot.id,\n      ...snapshot.data(),\n    });\n    yield call(\n      googleSignInCompleted({\n        id: snapshot.id,\n        ...snapshot.data(),\n      })\n    );\n    console.log(snapshot.id);\n  } catch (error) {\n    yield put(googleSignInError(error));\n  }\n}\n\nexport function* userRootSaga() {\n  yield all([call(GoogleSignInStart)]);\n}\n"]},"metadata":{},"sourceType":"module"}